@if (isDeleting()) {
  <div class="backdrop" (click)="hideGroupDeleteConfirmation()"></div>
  <dialog open>
    <form (ngSubmit)="deleteGroup()">
      <p>
        <h2 for="title">Are you sure, you want to delete this group?</h2>
        <p class="actions">
          <button type="button" (click)="hideGroupDeleteConfirmation()">Cancel</button>
          <button type="submit">Delete</button>
        </p>
    </form>
  </dialog>
}

<header>
  <div class="name-with-options">
    @if (groupFriendName() !== "") {
      <p class="group-name" (click)="toggleOptions()">
        {{groupFriendName()}}
        <mat-icon class="dropdown-icon">expand_more</mat-icon>
      </p>
    }
    @if (areOptionsVisible()) {
      <div class="options-dropdown">
        <button class="option-btn rename-btn" (click)="showAddingUserInput()">
          <mat-icon>add</mat-icon>
          Add user
        </button>
        @if (isAddingUser()) {
          <div class="rename-container">
            <input type="text" [(ngModel)]="username" maxlength="32" placeholder="Username" class="rename-input">
            <button class="save-btn" (click)="addUser()">Add</button>
          </div>
        }
        <button class="option-btn delete-btn" (click)="showGroupDeleteConfirmation()">
          <mat-icon>delete</mat-icon>
          Delete group
        </button>
        <label class="option-btn photo-btn">
          <mat-icon>photo_camera</mat-icon>
          Change photo
          <input type="file" accept="image/*" (change)="onFileSelected($event)" style="display: none;">
        </label>
        <button class="option-btn rename-btn" (click)="showRenameInput()">
          <mat-icon>edit</mat-icon>
          Rename group
        </button>
        @if (isRenaming()) {
          <div class="rename-container">
            <input type="text" [(ngModel)]="newGroupName" maxlength="32" placeholder="New name" class="rename-input">
            <button class="save-btn" (click)="renameGroup()">Save</button>
          </div>
        }
      </div>
    }
  </div>
  @if(isInFullChatMode()) {
    <mat-icon (click)="returnToNormalModeEvent.emit()" svgIcon="return" class="return-icon"></mat-icon>
  }
</header>